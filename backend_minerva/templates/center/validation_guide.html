{% extends 'center/base.html' %}

{% block title %}Guia de Valida√ß√£o - Centro App{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-4xl font-bold text-gray-900 flex items-center">
            <span class="mr-3 text-ocean-600">üìã</span>
            Guia de Valida√ß√£o Frontend
        </h1>
        <p class="mt-4 text-lg text-gray-600">
            Documenta√ß√£o completa do sistema de valida√ß√£o frontend para formul√°rios do centro app
        </p>
    </div>

    <!-- Overview -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
        <div class="p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Vis√£o Geral</h2>
            <div class="prose max-w-none">
                <p class="text-gray-700 mb-4">
                    O sistema de valida√ß√£o frontend implementado para o centro app oferece uma experi√™ncia 
                    moderna e intuitiva para valida√ß√£o de formul√°rios, com as seguintes caracter√≠sticas:
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h3 class="font-semibold text-green-800 mb-2">‚úÖ Recursos Implementados</h3>
                        <ul class="text-sm text-green-700 space-y-1">
                            <li>‚Ä¢ Valida√ß√£o em tempo real</li>
                            <li>‚Ä¢ Mensagens de erro personalizadas</li>
                            <li>‚Ä¢ Valida√ß√£o de duplicatas</li>
                            <li>‚Ä¢ Feedback visual moderno</li>
                            <li>‚Ä¢ Responsivo e acess√≠vel</li>
                            <li>‚Ä¢ Integra√ß√£o com Django API</li>
                        </ul>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-800 mb-2">üé® Tecnologias Utilizadas</h3>
                        <ul class="text-sm text-blue-700 space-y-1">
                            <li>‚Ä¢ TailwindCSS para estiliza√ß√£o</li>
                            <li>‚Ä¢ Alpine.js para interatividade</li>
                            <li>‚Ä¢ JavaScript ES6+ moderno</li>
                            <li>‚Ä¢ Django REST Framework (backend)</li>
                            <li>‚Ä¢ Componentes reutiliz√°veis</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Validation Examples -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
        <!-- Management Center Validation -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                    <span class="mr-2 text-ocean-600">üè¢</span>
                    Centro Gestor - Valida√ß√µes
                </h3>
                
                <div class="space-y-4">
                    <!-- Name Validation Demo -->
                    <div class="form-group" x-data="{ value: '', error: '' }">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Nome do Centro Gestor</label>
                        <div class="relative">
                            <input 
                                type="text" 
                                x-model="value"
                                @input="validateName()"
                                class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500 transition-colors"
                                :class="{ 'border-red-500 ring-1 ring-red-500': error }"
                                placeholder="Digite o nome do centro gestor">
                        </div>
                        
                        <!-- Error Display -->
                        <div x-show="error" x-transition class="mt-2 p-3 bg-red-50 border border-red-200 rounded-md">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-red-800" x-text="error"></p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Help Text -->
                        <div class="mt-2 text-sm text-gray-500" x-show="!error">
                            <div class="flex items-start space-x-2">
                                <svg class="w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <p>Nome deve conter apenas letras e ter pelo menos 3 caracteres.</p>
                            </div>
                        </div>
                        
                        <script>
                            function validateName() {
                                const value = this.value;
                                if (!value || value.trim().length === 0) {
                                    this.error = 'Nome √© obrigat√≥rio';
                                } else if (value.trim().length < 3) {
                                    this.error = 'Nome deve ter pelo menos 3 caracteres';
                                } else if (!/^[a-zA-Z√Ä-√ø\s]+$/.test(value)) {
                                    this.error = 'Nome deve conter apenas letras';
                                } else {
                                    this.error = '';
                                }
                            }
                        </script>
                    </div>
                </div>
            </div>
        </div>

        <!-- Requesting Center Validation -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                    <span class="mr-2 text-ocean-600">üèõÔ∏è</span>
                    Centro Solicitante - Valida√ß√µes
                </h3>
                
                <div class="space-y-4">
                    <!-- Management Center Selection -->
                    <div class="form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Centro Gestor</label>
                        <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500">
                            <option value="">Selecione o centro gestor</option>
                            <option value="1">CENTRO GESTOR A</option>
                            <option value="2">CENTRO GESTOR B</option>
                        </select>
                        <div class="mt-2 text-sm text-gray-500">
                            <div class="flex items-start space-x-2">
                                <svg class="w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <p>Selecione o centro gestor ao qual este centro solicitante estar√° vinculado.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Duplicate Warning Example -->
                    <div class="form-group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Nome do Centro Solicitante</label>
                        <input type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500"
                               placeholder="Digite o nome do centro solicitante">
                        
                        <!-- Duplicate Warning -->
                        <div class="mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-yellow-800">
                                        Aten√ß√£o: Um centro solicitante com este nome j√° existe para o centro gestor selecionado.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Validation Rules -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
        <div class="p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Regras de Valida√ß√£o</h2>
            
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Campo</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Regras</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mensagens</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Nome</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">String</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-900">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Obrigat√≥rio</li>
                                    <li>M√≠nimo 3 caracteres</li>
                                    <li>M√°ximo 100 caracteres</li>
                                    <li>Apenas letras (Centro Gestor)</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">
                                <ul class="space-y-1">
                                    <li>‚Ä¢ "Nome √© obrigat√≥rio"</li>
                                    <li>‚Ä¢ "Nome deve ter pelo menos 3 caracteres"</li>
                                    <li>‚Ä¢ "Nome deve conter apenas letras"</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Descri√ß√£o</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Texto</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-900">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Opcional</li>
                                    <li>M√°ximo 500 caracteres</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">
                                <ul class="space-y-1">
                                    <li>‚Ä¢ "Descri√ß√£o deve ter no m√°ximo 500 caracteres"</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Centro Gestor</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">Select</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-900">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Obrigat√≥rio (Centro Solicitante)</li>
                                    <li>Deve ser um ID v√°lido</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">
                                <ul class="space-y-1">
                                    <li>‚Ä¢ "Centro gestor √© obrigat√≥rio"</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Technical Implementation -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
        <div class="p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Implementa√ß√£o T√©cnica</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Frontend Stack -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Frontend Stack</h3>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">TailwindCSS</h4>
                            <p class="text-sm text-gray-600">
                                Utilizado para estiliza√ß√£o moderna e responsiva dos componentes de valida√ß√£o,
                                incluindo estados de erro, avisos e feedback visual.
                            </p>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Alpine.js</h4>
                            <p class="text-sm text-gray-600">
                                Framework JavaScript leve para reatividade e gerenciamento de estado
                                dos formul√°rios e valida√ß√µes em tempo real.
                            </p>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Validation Utils</h4>
                            <p class="text-sm text-gray-600">
                                Biblioteca personalizada de utilit√°rios para valida√ß√£o, incluindo
                                classes reutiliz√°veis e helpers para diferentes tipos de campo.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Backend Integration -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Integra√ß√£o Backend</h3>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Django REST Framework</h4>
                            <p class="text-sm text-gray-600">
                                API endpoints que retornam erros de valida√ß√£o estruturados,
                                compat√≠veis com o sistema de valida√ß√£o frontend.
                            </p>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Serializers</h4>
                            <p class="text-sm text-gray-600">
                                Serializers personalizados que processam dados de entrada
                                e retornam mensagens de erro padronizadas.
                            </p>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Custom Validators</h4>
                            <p class="text-sm text-gray-600">
                                Validadores customizados no backend para regras espec√≠ficas
                                como valida√ß√£o de nomes e checagem de duplicatas.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Code Examples -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
        <div class="p-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Exemplos de C√≥digo</h2>
            
            <!-- HTML Structure -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Estrutura HTML</h3>
                <div class="bg-gray-900 rounded-lg p-6 overflow-x-auto">
                    <pre class="text-green-400 text-sm"><code>&lt;div class="form-group"&gt;
    &lt;label class="block text-sm font-semibold text-gray-700 mb-2"&gt;
        Nome do Centro Gestor &lt;span class="text-red-500"&gt;*&lt;/span&gt;
    &lt;/label&gt;
    &lt;div class="relative"&gt;
        &lt;input 
            type="text" 
            x-model="formData.name"
            @input="clearFieldError('name')"
            class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-ocean-500"
            :class="{ 'border-red-500 ring-1 ring-red-500': errors.name }"
            placeholder="Digite o nome do centro gestor"
            required&gt;
    &lt;/div&gt;
    
    &lt;!-- Error Display --&gt;
    &lt;div x-show="errors.name" x-transition class="mt-2 p-3 bg-red-50 border border-red-200 rounded-md"&gt;
        &lt;div class="flex"&gt;
            &lt;div class="flex-shrink-0"&gt;
                &lt;svg class="h-5 w-5 text-red-400" fill="currentColor"&gt;&lt;/svg&gt;
            &lt;/div&gt;
            &lt;div class="ml-3"&gt;
                &lt;p class="text-sm font-medium text-red-800" x-text="errors.name"&gt;&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                </div>
            </div>

            <!-- JavaScript Logic -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">L√≥gica JavaScript</h3>
                <div class="bg-gray-900 rounded-lg p-6 overflow-x-auto">
                    <pre class="text-green-400 text-sm"><code>// Valida√ß√£o do formul√°rio
validateForm() {
    this.errors = {};
    let isValid = true;
    
    // Valida√ß√£o do nome
    if (!this.formData.name || this.formData.name.trim().length === 0) {
        this.errors.name = 'Nome √© obrigat√≥rio';
        isValid = false;
    } else if (this.formData.name.trim().length &lt; 3) {
        this.errors.name = 'Nome deve ter pelo menos 3 caracteres';
        isValid = false;
    } else if (!/^[a-zA-Z√Ä-√ø\s]+$/.test(this.formData.name)) {
        this.errors.name = 'Nome deve conter apenas letras';
        isValid = false;
    }
    
    return isValid;
}

// Limpar erro espec√≠fico do campo
clearFieldError(fieldName) {
    if (this.errors[fieldName]) {
        delete this.errors[fieldName];
    }
}</code></pre>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Demo validation for the example form
function validateName() {
    const value = this.value;
    if (!value || value.trim().length === 0) {
        this.error = 'Nome √© obrigat√≥rio';
    } else if (value.trim().length < 3) {
        this.error = 'Nome deve ter pelo menos 3 caracteres';
    } else if (!/^[a-zA-Z√Ä-√ø\s]+$/.test(value)) {
        this.error = 'Nome deve conter apenas letras';
    } else {
        this.error = '';
    }
}
</script>
{% endblock %}